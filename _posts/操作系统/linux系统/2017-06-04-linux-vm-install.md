---
title: 虚拟机安装linux（红帽）
tags: [linux]
---

参考：http://www.jb51.net/softjc/68770.html

### 创建虚拟机

虚拟机类型：vmware和virtualbox

1）新建虚拟机

新建--自定义--稍后安装操作系统（勾选）--选择安装的系统（linux）--设置虚拟机名称和存储位置--分配资源（cpu，内存，网络，硬盘容量40G）

注：vmware中存在一些应答文件，会实现系统的全自动安装，如果想自己安装系统，并配置参数。需要选择稍后安装操作系统。

2）虚拟机网络模式（三种）

参考：http://www.cnblogs.com/xiaochaohuashengmi/archive/2011/03/15/1985084.html

bridged(桥接模式)、NAT(网络地址转换模式)和host-only(主机模式)。

1.bridged(桥接模式)：相当于局域网中多增加了一台电脑

在这种模式下，VMWare虚拟出来的操作系统就像是局域网中的一台独立的主机，它可以访问网内任何一台机器。在桥接模式下，你需要手工为虚拟 系统配置IP地址、子网掩码，而且还要和宿主机器处于同一网段，这样虚拟系统才能和宿主机器进行通信。同时，由于这个虚拟系统是局域网中的一个独立的主机 系统，那么就可以手工配置它的TCP/IP配置信息，以实现通过局域网的网关或路由器访问互联网。

使用桥接模式的虚拟系统和宿主机器的关系，就像连接在同一个Hub上的两台电脑。想让它们相互通讯，你就需要为虚拟系统配置IP地址和子网掩码，否则就无法通信。

如果你想利用VMWare在局域网内新建一个虚拟服务器，为局域网用户提供网络服务，就应该选择桥接模式。

2.host-only(主机模式)：隔离

注：虚拟机仅能和宿主主机相连，不能和宿主主机所在的局域网内主机相连

在某些特殊的网络调试环境中，要求将真实环境和虚拟环境隔离开，这时你就可采用host-only模式。在host-only模式中，所有的虚拟系统是可以相互通信的，但虚拟系统和真实的网络是被隔离开的。

提示:在host-only模式下，虚拟系统和宿主机器系统是可以相互通信的，相当于这两台机器通过双绞线互连。

在host-only模式下，虚拟系统的TCP/IP配置信息(如IP地址、网关地址、DNS服务器等)，都是由VMnet1(host-only)虚拟网络的DHCP服务器来动态分配的。如果你想利用VMWare创建一个与网内其他机器相隔离的虚拟系统，进行某些特殊的网络调试工作，可以选择host-only模式。

3.NAT(网络地址转换模式)

使用NAT模式，就是让虚拟系统借助NAT（网络地址转换）功能，通过宿主机器所在的网络来访问公网。也就是说，使用NAT模式可以实现在虚拟系统里访问互联网。NAT模式下的虚拟系统的TCP/IP配置信息是由VMnet8（NAT）虚拟网络的DHCP服务器提供的，无法进行手工修改，因此虚拟系统也就无法和本局域网中的其他真实主机进行通讯。采用NAT模式最大的优势是虚拟系统接入互联网非常简单，你不需要进行任何其他的配置，只需要宿主机器能访问互联网即可。

注：如果你想利用VMWare安装一个新的虚拟系统，在虚拟系统中不用进行任何手工配置就能直接访问互联网，建议你采用NAT模式。

提示:以上所提到的NAT模式下的VMnet8虚拟网络，host-only模式下的VMnet1虚拟网络，以及bridged模式下的VMnet0虚拟网络，都是由VMWare虚拟机自动配置而生成的，不需要用户自行设置。VMnet8和VMnet1提供DHCP服务，VMnet0虚拟网络则不提供。

### 安装系统

1）设置安装镜像文件

在虚拟机设备中双击cd/dvd设备（双击虚拟光驱），设置镜像路径，启动虚拟机。

2）硬盘的表示方法

针对sata,scsi,sas类型的磁盘，以sd开头。

sda，sdb，sdc，其中a，b，c表示第几块硬盘。

sda1，sda2，sda3，其中1，2，3表示第几个分区。

针对IDE类型的磁盘，以hd开头

hda，hdb，hdc，其中a，b，c表示第几块硬盘。

hda1，hda2，hda3，其中1，2，3表示第几个分区。

注：硬盘存放在/dev下

3）手动分区（标准分区）

设置挂载点和分区大小，首先要创建出根分区/，分配20G，文件系统使用xfs。创建/home分区，分配2G。创建swap交换分区，分配2G，类似于windows下的虚拟内存（作用是防止内存不够用）。

注：/表示根分区，其他分区全都装载了根分区中。目录称为挂载点。在linux中如果需要使用一个分区，必须要先把它挂载起来。与windows系统不同，windows运行有c，d盘符，不要求d盘符挂载到c盘符下面（c，d盘符是平等的关系）。

### 创建一个普通用户

linux使用时一般使用普通用户，尽量不要使用root用户

### 重新启动

1）Kdump功能关闭

Kdump是当内核崩溃时会收集一些错误信息，对于内核开发人员比较有用，而且比较消耗内存，这里暂时取消。