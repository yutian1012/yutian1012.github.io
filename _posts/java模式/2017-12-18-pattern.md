---
title: java 模式
tags: [pattern]
---

### 单例模式

![](/images/java_pattern/pattern/singleton.png)

### 工厂模式

![](/images/java_pattern/pattern/factory.png)

### 模板模式

![](/images/java_pattern/pattern/template.png)

### 建造者模式

builder具体实现类中封装了创建具体产品的细节。

![](/images/java_pattern/pattern/builder.png)

### 静态代理模式

代理类包含接口实现类的引用，在调用接口方法时会添加一些前置和后置操作，并通过调用实现类的方法来处理。

![](/images/java_pattern/pattern/staticProxy.png)

### 动态代理模式

动态代理针对具有多个类具有相似操作，来封装前置和后置处理，而将具体实现交由每个具体的类来实现。

如某一类操作在实现时要进行前置和后置操作，而且这些前置和后置操作是相同的，为了防止重复代码在多个地方出现，可创建一个动态代理Handler1来处理。另外一类创建动态代理Handler2，来处理另外有共性的相似方法。当然他们实现了不同的接口代理接口。

有时候一个类可能会实现多个动态代理接口（即多个代理接口的实现类），该类在系统中有多种相似的操作，分别对这些相似的操作进行了动态代理的封装，使用某个特性方法时，只需使用相应的接口即可访问。

![](/images/java_pattern/pattern/dynamicProxy.png)

注：静态代理可以对接口中的每个方法都添加前置和后置处理。而动态代理一般只针对一个共性方法设置前置和后置处理。

### 原型模式

一般情况下clone方法创建对象的速度要比new创建对象的速度快很多。

![](/images/java_pattern/pattern/prototype.png)

注：在写clone方法时注意深拷贝和浅拷贝。

### 中介者模式（进销存）

AbstractMediator中包含Purchase，Sale，Stock的引用

AbstracColleague包含AbstractMediator引用，从而使Purchase，Sale，Stock模块也能包含其引用（继承关系）

Purchase调用方法如果涉及到多模块协作时，则调用Mediator中已经实现的协作方法（如colleagueOper1）

![](/images/java_pattern/pattern/prototype.png)

注：Mediator类只是将模块间的耦合代码放置到一个统一的地方进行设置，方便查看和修改

### 命令模式

Invoker调用者可以设置命令对象（实现命令的切换），当然也可以有多个Invoker，不同Invoker对应不同的Command，或者Invoker有多个方法，在不同的方法中设置不同的的Command

Invoker调用者只知道有命令对象的存在（系统中的所有相关命令），不需要知道命令是如何执行的

Invoker的execute会直接调用Command的execute方法

Command中包含具体的命令接收者，一般不同Command对应不同的命令接收者

Command的execute方法，一般会直接调用Receiver的action方法，最终的执行交由接收者来实现

![](/images/java_pattern/pattern/command.png)

### 责任链模式

从一个入口沿着链节点一个一个的走下去，在执行走的过程中判断否交由该链节点来执行，否则就继续执行下去，直到链结束。

![](/images/java_pattern/pattern/chain.png)

### 装饰模式

以咖啡来作为装饰模式的实例：喝咖啡时可以加牛奶，也可以加糖。Beverage中文意思是饮料。

Milk间接的继承了Beverage，在重写drink时，可以先/后调用自己的方法（达到装饰效果），再调用被装饰者的drink方法（包含被装饰对象的引用）。

可同时装饰多个，即使有多个装饰对象包裹被装饰对象

new Sugar(new Milk(new Coffee()));//代码通过构造函数进行装饰实现

![](/images/java_pattern/pattern/decorator.png)

注：最终调用drink方法时，会先调用Sugar的drink方法，Sugar的drink方法内部会调用Milk的drink方法，Milk的drink方法会调用coffee的drink方法，达到一层一层的装饰调用。

### 策略模式

Context是上下文环境，包含IStrategy的引用

Client调用者必须知道所有的策略，调用时，向上下文环境中设置使用的策略，然后调用Context的operate方法

Context的operate方法会调用具体策略的operate实现方法

![](/images/java_pattern/pattern/strategy.png)

### 适配器模式

适配器模式，以3孔插座适配成2孔插座为例

Adaptor适配器对外表现为2孔插座，所以要继承TwoHoleSocket（2孔插座）

被适配对象是3孔插座（ThreeHoleSocket），也是该对象提供电源，因此必须聚合该对象

client掉适配器方法的power时，Adapter会转而调用被适配对象的相应方法

![](/images/java_pattern/pattern/adaptor.png)
