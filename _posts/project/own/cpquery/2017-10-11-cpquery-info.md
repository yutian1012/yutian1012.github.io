---
title: xxx网站数据爬取
tags: [cpquery]
---

实现爬取xxx网站的专利数据信息，并对外提供服务。

主要分为3个部分：接口访问，数据爬取，图片服务。

1）接口访问

web服务提供获取数据的接口访问，即通过数据爬取功能，将爬取到的数据保存到持久层中，并提供一个web服务实现其他系统访问爬取到的数据，即用来为相关的业务起到数据支撑的功能。

2）数据爬取

通过自定义爬取网页数据规则进行网页数据的爬取操作。并将爬取到的数据保存到数据库中。

3）图片服务

爬取到的数据中有些是图片信息，将这些图片的访问单独创建一个服务器。

### 接口访问

通过oauth协议对用户授权，访问服务器提供的数据信息。

1）框架：spring+spring mvc+spring security(oauth)+mybatis

2）模块划分

用户模块：用户注册，登录

授权模块：用户访问资源的授权模块

访问模块：提供资源的访问，以RESTFUL api的方式提供访问。

认证授权模块：该模块交由oauth协议来进行认证和授权访问操作。

### 数据爬取

这是一个客户端应用程序，可以通过cmd或sh的方式启动运行爬虫服务。主要实现包括爬取规则解析，利用webmagic开源工具进行底层的爬取操作。

1）框架：spring+mybatis

2）模块划分

命令执行模块：执行cmd或sh方式启动java进程，并设置相关参数开启爬虫爬取数据。

网页解析模块：用于解析html中的组织信息，获取爬取的字段信息。

执行爬取保存包括：获取网页，根据设置的解析网页模板从网页中查找，并保存数据到数据库中。

### 图片服务

担当图片服务器的角色，图片服务器为了防止被盗用，采用url加密的方式来实现。浏览器中访问的图片路径是被加密的路径，到图片服务器上会进行解密操作，获取实际图片的地址，并使用流的方式返回图片。