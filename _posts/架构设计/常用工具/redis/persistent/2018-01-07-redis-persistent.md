---
title: redis持久化
tags: [redis]
---

持久化：即把数据存储于断电后不会丢失的设备中，通常是硬盘。

1）常见的持久化方式

主从方式：主服务器将数据保存在内存中，通过从服务器保存和持久化数据，如mongoDB的replication sets配置。

通过日志方式：操作生成相关日志，并通过日志来恢复数据，如mysql在操作数据前都会写bin-log日志，在需要恢复数据时通过bin-log日志进行数据恢复。

不修改只追加方式：counchDB对于数据内容，不修改，只追加。则文件本身就是日志，不会丢失数据。

### redis两种持久化方式

redis包含rdb和aof两种持久化方式

1）rdb快照方式持久化

快照就是将内存的数据原样不动的直接写入磁盘中，存入的是内存映像文件。每隔N分钟或N次写操作后，从内存dump数据形成rdb文件，压缩并放在备份目录。

注：rdb方式在保存点间可能会丢失数据。

2）aof方式持久化

aof是日志方式的持久化。日志是指做了什么操作都会记录下来，可以通过日志文件信息进行文件系统的恢复操作。