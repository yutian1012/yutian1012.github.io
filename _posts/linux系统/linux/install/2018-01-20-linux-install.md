---
title: linux系统安装
tags: [linux]
---

使用虚拟机安装时建议网络环境使用bridge（桥接）模式，这样可以实现与局域网的其他主机互通，进而可以实现集群的效果。

### 安装过程

1）下载软件

下载地址（推荐下载DVD格式的ISO文件）：https://wiki.centos.org/Download

下载CentOS-6.7-x86_64-bin版本的镜像文件，包括两个文件，只需要第一个镜像文件即可，第二个镜像文件很少用到，因为我们在安装系统时都采用最小安装原则，第一个镜像文件的软件包就足够了。

2）创建虚拟机安装系统

创建虚拟机后，将下载的iso文件CentOS-6.7-x86_64-bin-DVD1.iso放置到虚拟机的cd光驱中运行。

启动虚拟机，选择一项Install or upgrade an existing system选项进入安装系统环节

3）磁盘分区设置

选择create custom layout（自定义磁盘分区）

分区方案为根分区（/）、引导分区（/boot）、swap，使用ext4格式化分区，分区都为主分区。

注：创建时先创建/boot，再创建swap，最后创建/，将剩余的空间都分给/根分区。

注2：如果是数据库及存储等有重要数据的特殊业务服务，一般会单独划分存放数据的分区，如/data分区。

### 安装过程的解释

1）交换分区

交换分区是一个特殊的分区，它的作用相当于Windows下的虚拟内存，这个分区的大小一般设置为物理内存的两倍，但是不管物理内存有多大，交换分区建议不要超过8GB，因为大于8GB的交换分区其实并没有多大实际意义。

2）分区定义

在安装Linux的过程中，必须要有的两个分区为根分区（/）和swap分区（交换分区）。

注：还有一些其他的分区可以独立出来，比如说/boot分区、/var分区等。

注2：/boot分区用于放置Linux启动所用到的文件，如kernel和initrd文件。

3）错误提示

安装centos 提示This kernel requires an x86-64 CPU, but only detected an i686 CPU.

![](images/linux/install/install-problem1.png)

解决方法：

在bios里设置虚拟化，设置Intel Virtualization Technology为enable。

注：如果是笔记本电脑要使用笔记本上的键盘进入bios。

4）主分区和扩展分区

a.磁盘分区有主分区、扩展分区和逻辑分区之分。一块磁盘最多可以有4个主分区，其中一个主分区的位置可以用一个扩展分区替换，在这个扩展分区内可以划分多个逻辑分区。

b.如果规划的分区数量超过4个，则分区组合为3primary+1extend或2p+1e或1p+1e。

c.一块磁盘最多只能有一个扩展分区，扩展分区不能直接使用，必须在扩展分区上划分逻辑分区，然后格式化（创建文件系统），之后才能存取数据或安装系统。

5）linux系统对分区的要求

a.最少要有一个根（/）分区，用来存放系统文件及程序。其大小至少在5GB以上。

b.要有一个swap（交换）分区，它的作用相当于Windows里的虚拟内存，swap分区的大小一般为物理内存容量的1.5倍（内存<8GB）。但当系统物理内存大于8GB时，则swap分区配置8~16GB即可，太大无用，浪费磁盘空间。swap分区不是必需的，但是大多数情况应该设置，个别企业的数据库应用场景不分swap。

c./boot分区，这是Linux系统的引导分区，用于存放系统引导文件，如Linux内核等。所有文件的总大小一般只有几十MB，并且以后也不会增大太多。因此，该分区可以设置为100~200MB，这个分区也不是必需的。