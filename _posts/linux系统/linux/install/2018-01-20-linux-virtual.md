---
title: 虚拟机
tags: [linux]
---

1）介绍

虚拟机（VirtualMachine）软件就是一套特殊的软件，它可以作为操作系统独立运行，也可以运行于操作系统之上。若是运行于系统之上的虚拟机软件，在一台计算机（PC或笔记本电脑等）上安装虚拟机软件后，就可以模拟若干台相对独立的虚拟PC设备，并且可以在每台虚拟的PC设备上安装运行操作系统，运行网络服务，与真实的计算机设备几乎无任何使用差别。

2）常用软件

VMware Workstation，工作站版虚拟机软件（推荐使用）。

KVM/Xen linux的虚拟化，服务器级虚拟软件，适合企业虚拟化引用。

Virtual PC，MAC平台可用

VirtualBox，开源的虚拟机软件。

### VMware虚拟机的网络模式

VMware虚拟机常见的网络类型有Bridged（桥接）、NAT、Host-only（仅主机）3种

1）NAT（适合拨号上网的宿主机）

a.NAT模式介绍

NAT（NetworkAddressTranslation，网络地址转换），NAT模式是比较简单的实现虚拟机上网的方式。简单地理解，NAT模式的虚拟机就是通过宿主机（物理计算机）上网和交换数据的。

在NAT模式下，虚拟机的网卡连接到宿主机的VMnet8上。此时系统的VMwareNATService服务就充当了路由器（路由器是运行在宿主机上的服务），负责将虚拟机发送到VMnet8的包进行地址转换之后发送到实际的网络上，再将实际网络上返回的包进行地址转换后通过VMnet8发送给虚拟机。VMwareDHCPService负责为虚拟机分配IP地址。

注：使用NAT模式虚拟系统可把物理主机作为路由器访问互联网。

b.虚拟机与主机互通

使用VMWARE时在这种模式下即使主机没有网络或者没有路由器接入的情况下，主机还是可以和虚拟机通信（互相PING通），并且虚拟机可以联网（可以上网），但是外界除了主机以外都是无法PING通这个虚拟机的。所以这种模式下如果有下位机接入到路由器并想用TFTP协议从虚拟机中读取文件，在这种模式是无法实现的。这种模式下虚拟机的IP不能和主机是同一个网段的，比如主机IP是192.168.1.12，虚拟机的IP是192.168.30.3。

注：NAT模式下虚拟机与主机是不在同一网段的。

2）Bridge（桥接）

桥接模式可以简单理解为通过物理主机网卡架设一座桥，从而连入实际的网络中。因此，虚拟机可以被分配与物理主机相同网段的独立IP，所有网络功能和网络中的真实机器几乎完全一样。

注：桥接模式下的虚拟机和网内真实计算机所处的位置是一样的，因此可以实现与局域网内其他主机相互通信。

Bridged网络类型特别适合于局域网环境，其优势是虚拟机像一台真正的主机一样，缺点是可能会与其他物理主机IP冲突，并且在与宿主机交换数据时，都会经过实际的路由器。

3）host-only（仅主机）

在Host-only模式下，虚拟机的网卡会连接到宿主的VMnet1上，但宿主系统并不为虚拟机提供任何路由服务，因此虚拟机只能与宿主机进行通信，不能连接到实际网络上，即无法上网，也无法与局域网内的其他机器相互连接。

注：这种模式相当于虚拟机与主机使用1根网线相连接。
