---
title: 微信公众开发平台--消息处理
tags: [weixin]
---

从第三方平台的角度来区分，消息分为接收消息和发送消息。对应的消息格式是存在少许区别的。可通过官方提供的文档来查看并设置。

另外，针对事件类型的消息只会是微信服务器发送到第三方平台，不存在第三方平台向微信服务器推送事件类型的消息。即事件类型的消息是单向的，有微信服务器推送到第三方平台。

### 微信服务器发送到第三方平台的消息

微信公众平台支持的消息类型以及对应的事件关键字，微信可接收的消息类型以及可触发的事件类型有很多种，而每种类型都对应着详细的XML包，在微信公众平台开发文档中有详细解析。

用户在关注公众号后可以向公众号中发送语音，文字，图片，定位，甚至视频。响应的微信服务器会将这些信息以消息的形式发送给第三方平台。

![](/images/weixin/develop/mp/weixin-message.png)

1）可接收消息类型：

文本消息——text，

语音消息——voice，

图片消息——image，

视频消息——video，

链接消息——link，

位置消息——location，

消息视频消息——shortvideo，

2）支持的事件推送——event

a.关注——subscribe，

b.取消关注——unsubscribe，

c.上传地理位置——location

d.菜单点击：

点击菜单获取消息时触发click；点击菜单跳转链接时触发view

e.扫描带参数二维码：

未关注时触发subscribe；已关注时触发scan

### 第三方平台响应服务器回传消息

严格来说，发送被动响应消息其实并不是一种接口，而是对微信服务器发过来消息的一次回复。这里只是作为被动的消息回复。

1）回复消息类型

a.回复文本消息

b.回复图片消息

c.回复语音消息

d.回复视频消息

e.回复音乐消息

f.回复图文消息