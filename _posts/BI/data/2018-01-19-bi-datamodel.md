---
title: bi中DW的数据模型
tags: [BI]
---

DB的模型是ER模型，遵从范式化设计原则，而DW的数据模型是雪花型结构或者星型结构，用的是面向主题，面向问题的设计思路，所以DB和DW的模型结构不同，需要进行转换。

参考：http://blog.csdn.net/ecjtuxuan/article/details/6273983

### DW数据模型

在多维分析的商业智能解决方案中，根据事实表（度量表）和维度表的关系，又可将常见的模型分为星型模型和雪花型模型。在设计逻辑型数据的模型的时候，就应考虑数据是按照星型模型还是雪花型模型进行组织。

1）星型模型（推荐）

当所有维表都直接连接到事实表上时，整个图解就像星星一样，故将该模型称为星型模型。

星型架构是一种非正规化的结构，多维数据集的每一个维度都直接与事实表相连接，不存在渐变维度，所以数据有一定的冗余，如在地域维度表中，存在国家A省B的城市C以及国家A省B的城市D两条记录，那么国家A和省B的信息分别存储了两次，即存在冗余。

![](/images/BI/data/startmodel.jpg)

2）雪花型模型

当有一个或多个维表没有直接连接到事实表上，而是通过其他维表连接到事实表上时，其图解就像多个雪花连接在一起，故称雪花模型。

雪花模型是对星型模 型的扩展。它对星型模型的维表进一步层次化，原有的各维表可能被扩展为小的事实表，形成一些局部的层次区域，这些被分解的表都连接到主维度表而不是事实表。如，将地域维表又分解为国家，省份，城市等维表。它的优点是 : 通过最大限度地减少数据存储量以及联合较小的维表来改善查询性能。雪花型结构去除了数据冗余。

![](/images/BI/data/snowmodel.jpg)

3）两模型的比较

星型模型因为数据的冗余所以很多统计查询不需要做外部的连接，因此一般情况下效率比雪花型模型要高。星型结构不用考虑很多正规化的因素，设计与实现 都比较简单。 雪花型模型由于去除了冗余，有些统计就需要通过表的联接才能产生，所以效率不一定有星型模型高。正规化也是一种比较复杂的过程，相应的数据库结构设计、数 据的 ETL、以及后期的维护都要复杂一些。因此在冗余可以接受的前提下，实际运用中星型模型使用更多，也更有效率。

### 维度表和事实表的理解

参考：https://www.cnblogs.com/sdjnzqr/p/3829670.html

1）维度表的理解

维度表示对数据进行分析时所用的一个量，如要分析产品销售情况，可以选择按类别来进行分析，或按区域来分析，而类别或区域就是一个维度。另外每个维度还可以有子维度（称为属性），例如类别可以有子类型，产品名等属性。

一个维是通过一组属性来描述的，如时间维包含年份、季度、月份和日期等属性，这里的年份、季度等称为时间维的维属性。

2）事实表的理解

度量是数据仓库中的信息单元，通常是数值型数据并具有可加性（如销售量）。

事实表也称为度量表，是数据聚合后依据维度生成的结果表。