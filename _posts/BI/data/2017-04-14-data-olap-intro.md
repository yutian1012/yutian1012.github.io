---
title: 数据仓库--OLAP 维度
tags: [BI]
---

参考：http://www.cnblogs.com/mq0036/p/4155832.html

多维数据模型作为一种新的逻辑模型赋予了数据新的组织和存储形式，而真正体现其在分析上的优势还需要基于模型的有效的操作和处理，也就是OLAP（On-line Analytical Processing，联机分析处理）。

### 数据立方体

关于数据立方体（Data Cube），这里必须注意的是数据立方体只是多维模型的一个形象的说法。立方体其本身只有三维，但多维模型不仅限于三维模型，可以组合更多的维度，但一方面是出于更方便地解释和描述，同时也是给思维成像和想象的空间；另一方面是为了与传统关系型数据库的二维表区别开来，于是就有了数据立方体的叫法。

![](/images/open/spagobi/spagobi-loap-datacube.png)

### OLAP类型

有关多维数据模型和OLAP的内容基本都是基于ROLAP。

1）MOLAP(Multidimensional)

即基于多维数组的存储模型，也是最原始的OLAP，但需要对数据进行预处理才能形成多维结构。维的属性值被映射成多维数组的下标值或下标的范围，而总结数据作为多维数组的值存储在数组的单元中。

注：即以多维数组的方式存放分析数据

2）ROLAP(Relational)

比较常见的OLAP类型，这里介绍和讨论的也基本都是ROLAP类型，其实ROLAP是完全基于关系模型进行存放的，只是它根据分析的需要对模型的结构和组织形式进行的优化，更利于OLAP。

注：使用关系型数据库存放分析数据

3）HOLAP(Hybrid)

介于MOLAP和ROLAP的类型，我的理解是细节的数据以ROLAP的形式存放，更加方便灵活，而高度聚合的数据以MOLAP的形式展现，更适合于高效的分析处理。

注：Hybrid表示混合在一起的意思

4）其他

另外还有WOLAP(Web-based OLAP)、DOLAP(Desktop OLAP)、RTOLAP(Real-Time OLAP)，具体可以参开维基百科上的解释——OLAP。

### OLAP基本操作

OLAP的操作是以查询——也就是数据库的SELECT操作为主，但是查询可以很复杂，比如基于关系数据库的查询可以多表关联，可以使用COUNT、SUM、AVG等聚合函数。

OLAP的多维分析操作包括：钻取（Drill-down）、上卷（Roll-up）、切片（Slice）、切块（Dice）以及旋转（Pivot）。

![](/images/open/spagobi/spagobi-loap-dataoper.png)

1）钻取（Drill-down）：

在维的不同层次间的变化，从上层降到下一层，或者说是将汇总数据拆分到更细节的数据，比如通过对2010年第二季度的总销售数据进行钻取来查看2010年第二季度4、5、6每个月的消费数据，如上图；当然也可以钻取浙江省来查看杭州市、宁波市、温州市……这些城市的销售数据。

2）上卷（Roll-up）：

钻取的逆操作，即从细粒度数据向高层的聚合，如将江苏省、上海市和浙江省的销售数据进行汇总来查看江浙沪地区的销售数据，如上图。

3）切片（Slice）：

选择维中特定的值进行分析，比如只选择电子产品类的销售数据，或者2010年第二季度的数据。

4）切块（Dice）：

选择维中特定区间的数据或者某批特定值进行分析（同一维度多个值的集合），比如选择2010年第一季度到2010年第二季度的销售数据，或者是电子产品和日用品类的销售数据。

5）旋转（Pivot）：

即维的位置的互换，就像是二维表的行列转换，如图中通过旋转实现产品维和地域维的互换。

### OLAP优势

首先必须说的是，OLAP的优势是基于数据仓库面向主题、集成的、保留历史及不可变更的数据存储，以及多维模型多视角多层次的数据组织形式，如果脱离的这两点（仓库和多维模型），OLAP将不复存在，也就没有优势可言。

数据展现方式

1）多维度的数据查看和分析

让数据的展示更加直观，它就像是我们平常看待各种事物的方式，可以从多个角度多个层面去发现事物的不同特性，而OLAP正是将这种寻常的思维模型应用到了数据分析上。

2）查询效率

多维模型的建立是基于对OLAP操作的优化基础上的，比如基于各个维的索引、对于一些常用查询所建的视图等，这些优化使得对百万千万甚至上亿数量级的运算变得得心应手。

3）分析的灵活性（自定义的选择维度）

我们知道多维数据模型可以从不同的角度和层面来观察数据，同时可以用上面介绍的各类OLAP操作对数据进行聚合、细分和选取，这样提高了分析的灵活性，可以从不同角度不同层面对数据进行细分和汇总，满足不同分析的需求。

注：一旦多维数据模型建成后，在上面做OLAP其实是一件很容易的事情。