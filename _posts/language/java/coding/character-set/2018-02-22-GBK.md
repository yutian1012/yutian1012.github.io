---
title: GBK编码
tags: [coding]
---

1）GBK全称叫《汉字内码扩展规范》

GBK是国家技术监督局为windows95所制定的新的汉字内码规范，它的出现是为了扩展GB2312，加入更多的汉字。它的编码范围是8140--FEFE（首字节在81-FE之间，尾字节在40-FE）之间总共有23940个码位，它能表示21003个汉字。它的编码是和GB2312兼容的，也就是说用GB2312编码的汉字可以用GBK来解码，并且不会有乱码。

注：GBK码（双字节编码，占2个字节）

2）GBK的首字节

![](/images/other/encode/GBK-first-byte.png)

上面部分是兼容ASCII单字节编码。下面阴影部分是双字节编码中的第一个字节。

3）兼容ASCII码

当遇到的字节小于81H（首字节），则取出一个字节作为ASCII码来处理。当遇到的字节大于等于81H，则连续取出两个字节（首字节和尾字节一同处理），使用GBK进行处理。

4）GBK的低字节

![](/images/other/encode/GBK-second-byte.png)

第二字节从0x40开始，不是从0x00也不是从0x80开始。

5）兼容GBK

"啊"位于A1处，所以它是兼容GB2312的，即将GB2312的编码位置原样不动的放置到GBK编码的位置处，达到兼容。

注："啊"下面的554A即是它的UTF-16编码（图中表是使用UTF-16显示的）。GBK与UTF-16之间编码的转换只能通过查表实现。通过查表可以找到UTF-16的554A码对应的GBK码为B0A1，即与GB2312的编码相同。

6）GBK所能表示的字符数量

a.GBK第一个字节可用126个标志

从81开始（0x80，即128，被用于欧元符），而0xFF则保留，实际共有128-2=126块。

b.GBK第二个字节可用190个标志

从0x40开始，另外0x7F和0xFF两处保留未定义。所以实际有12×16-2=192-2=190个字符。（即高4位表示的数量为16-4=12，乘以低4位16，减去2个未使用的标志）

注：粗略估算可得126×190=23940，所以GBK也就是两万多个字符这样子.