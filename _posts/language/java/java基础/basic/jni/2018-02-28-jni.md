---
title: JNI
tags: [jni]
---

JNI是Java-Native-Interface的缩写，目的是允许Java代码和其他语言（如C或C++）写的代码进行交互。

*注：只有当你必须在同一进程中调用本地代码时，再使用JNI。*

### 设计目的：

标准的java类库可能不支持你的程序所需的特性。或许你已经有了一个用其他语言写成的库或程序，而你希望在java程序中使用它。

你可能需要用底层语言实现一个小型的时间敏感代码，比如汇编，然后在你的java程序中调用这些功能。

### 缺点

1）跨平台性变差

程序不再跨平台。要想跨平台，必须在不同的系统环境下重新编译本地语言部分。

2）安全性变差

程序不再是绝对安全的，本地代码的不当使用可能导致整个程序崩溃。一个通用规则是，你应该让本地方法集中在少数几个类当中。这样就降低了JAVA和C之间的耦合性。

注：Java是类型安全的开发语言，而C却可以使用指针改变内存数据。

3）稳定性变差

当同一进程中的c程序出现问题，会影响到该进程，从而导致JVM宕机。即，JNI 编程，如果操作不当，可能引起Java虚拟机的崩溃，可能引起内存泄漏。

### 应用场景

1）特殊系统环境下（平台相关性）

程序当中用到了JAVA API不提供的特殊系统环境才会有的特征。而跨进程操作又不现实。

2）使用便利的本地库（对 native code 的代码重）

你可能想访问一些己有的本地库，但又不想付出跨进程调用时的代价，如效率，内存，数据传递方面。

3）效率要求（native code 底层操作，更加高效）

JAVA程序当中的一部分代码对效率要求非常高，如算法计算，图形渲染等。

