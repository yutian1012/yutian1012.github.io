---
title: ReentrantLock实现
tags: [architecture]
---

内部的本质实现就是一个CAS的操作。通过CAS是否能够修改一个变量成功来判断锁是否能够获取。

### CAS状态

用来表示锁是否被占用，0表示没有被占用，1表示被占用。在使用lock方法时，使用CAS方法将值该为1，如果修改成功，则表示当前线程获取了锁，否则表示没有获取锁。

### 等待队列

如果当前线程没有拿到锁，则该线程进入一个等待队列。等待队列中的线程执行park操作，将自己挂起。只有前一个线程unlock后，会执行unpark，将队列中的后一个线程解挂。

### 源码的分析与查看