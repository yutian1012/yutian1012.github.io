---
title: spring表达式集合操作
tags: [spring]
---

SpEL中可以集合和数组

1）最简单的事情可能就是引用列表中的一个元素了：

实例：计算songs集合中第五个（基于零开始）元素的title属性.

```
#{jukebox.songs[4].title}
```

注：“[]”运算符用来从集合或数组中按照索引获取元素

2）集合元素过滤

SpEL还提供了查询运算符（.?[]），它会用来对集合进行过滤，得到集合的一个子集。选择运算符在它的方括号中接受另一个表达式。当SpEL迭代歌曲列表的时候，会对歌曲集合中的每一个条目计算这个表达式。如果表达式的计算结果为true的话，那么条目会放到新的集合中。否则的话，它就不会放到新集合中。

实例：在jukebox中songs集合对象的artist属性为Aerosmith的所有歌曲。

```
#{jukebox.songs.?[artist eq 'Aerosmith']}
```

注：可以看到，在本例中，内部的表达式会检查歌曲的artist属性是不是等于Aerosmith。

3）获取集合的第一个或最后一个元素

SpEL还提供了另外两个查询运算符：“.^[]”和“.$[]”，它们分别用来在集合中查询第一个匹配项和最后一个匹配项。

实例：查找列表中第一个artist属性为Aerosmith的歌曲：

```
#{jukebox.songs.^[artist eq 'Aerosmith']}
```

4）投影操作

获取对象的属性的集合，而不是对象子集。

SpEL还提供了投影运算符（.![]），它会从集合的每个成员中选择特定的属性放到另外一个集合中。

假设我们不想要歌曲对象的集合，而是所有歌曲名称的集合。如下的表达式会将title属性投影到一个新的String类型的集合中：

```
#{jukebox.songs.![title]}
```

实际上，投影操作可以与其他任意的SpEL运算符一起使用。比如，我们可以使用如下的表达式获得Aerosmith所有歌曲的名称列表：

```
#{jukebox.songs.?[artisteq'Aerosmith'].![title]}
```