---
title: jvm堆
tags: [interview]
---

堆，java中new方式创建的对象会将数据信息保存到堆中。

堆分成三个代：新生代，老年代，永久代。

新生代又分三个区域，eden，s0，s1（分为8:1:1）。

注：这里的s表示Survivor

1）为什么分代分区

分代分区是为了提供空间利用率和垃圾回收效率，可以是jconsole查看空间利用率。

2）新生代三个区分配实例

假设，Eden区8M，S0空间1M，S1空间1M。现在申请8M的空间，会将字节放到Eden区吗？这里忽略到Eden区的其他数据结构占用空间，8M全部用来存放对象。那么要看Eden区设置的装填因子是否允许。这里假设允许，则8M的对象申请会在Eden区开辟。然后又申请1M的空间，那么该如何分配？

注：1.8中使用meta Space来替代永久代，解决永久代的堆内存溢出问题。meta space是可以扩容的。扩容也需要双向理解，虽然可以无限扩容，但在内存一定的情况下，会压缩其他空间的占用情况。

3）为什么常量和静态变量放到方法区中而不放到堆中。

静态变量与普通变量（成员变量）加载的时机不同，另外，静态变量是在类层次上的，多个实例共享静态变量。如果放置在堆中，改变了静态变量的值后，需要在堆中的所有实例上都进行修改。