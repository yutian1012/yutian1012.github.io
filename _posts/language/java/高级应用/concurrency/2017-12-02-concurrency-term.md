---
title: 并行的概念
tags: [architecture]
---

### 有关并行的几个重要概念

1）同步（synchronous）和异步（asynchronous）

同步和异步表现方法调用上，同步调用表示当前线程一直执行，直到执行完毕后返回。异步调用表示方法调用后直接返回，并开启新的线程处理逻辑。

2）并发（Concurrency）和并行（Parallelism）

并行表示多个线程同时执行，并发表示系统会存在多个线程间来回切换执行。对外的表现上（使用者看来）都是一样的。在单核cpu上不会出现并行的概念，只存在并发。对于多核cpu才会出现并行的情况。

3）临界区

对于多线程并发来讲，临界区用来表示一种公共资源或者说是共享数据，可以被多个线程使用。但每一次只能有一个线程使用它，一旦临界区资源被占用，其他线程要使用这个资源，就必须等待。

注：临界区是一个需要被控制的区域，即每一次都只能由一个线程访问。控制方式一般就是采用锁。

4）阻塞（Blocking）和非阻塞（Non-Blocking）

阻塞和非阻塞通常用来形容多线程间的相互影响。比如一个线程占用了临界区资源，那么其他所有需要这个临界区资源的线程就必须等待，等待会导致线程挂起，这种情况就是阻塞。

5）锁（Deadlock），饥饿（Starvation）和活锁（livelock）

锁是用来控制限制临界区访问的机制。

饥饿是指某一个或多个线程因为种种原因无法获得所需要的资源，导致一直无法执行。但此时并没有出现死锁。饥饿一般出现在线程优先级低的线程上。线程优先级低竞争资源的能力就弱。

### 并行定律

1）Amdahl定律（阿姆达尔定律）

描述了串行系统并行化后的加速比的计算公式和理论上线。即当我们把串行的程序改造后变成能在多核cpu上运行的并行程序后，提升的性能会有多少的一个定律。

加速比=优化前系统耗时/优化后系统耗时

该定律给出了一个公式，告诉我们，增加CPU处理器的数量并不一定能起到有效的作用。提高系统效率，可以考虑提高系统内可并行化的模块比重，合理增加并行处理器数量，才能以最小的投入，得到最大的加速比。

2）Gustafson定律（古斯塔夫森）

该定律说明处理器个数，串行比例和加速比之间的关系。只要有足够的并行化，那么加速比和CPU格式成正比。

注：两个定律解释并行的角度不同，阿姆达尔定律说明只加cpu个数是没有用的，必须提高串行化比例才行（投入和产出比）。古斯塔夫森定律表示串行化比例一定的情况下，只要追加cpu个数，就能提升性能。