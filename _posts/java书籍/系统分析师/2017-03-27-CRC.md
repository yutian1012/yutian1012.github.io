---
title: 系统分析师（软考）--CRC循环冗余校验
tags: [architecture]
---

循环冗余校验(Cyclic Redundancy Check, CRC)是一种根据网络数据包或电脑文件等数据产生简短固定位数校验码的一种散列函数，主要用来检测或校验数据传输或者保存后可能出现的错误。它是利用除法及余数的原理来作错误侦测的。

### 1. 基本原理

1）原理

通过在发送的比特串后附加CRC校验码（也称为FCS，帧校验序列），在发送方设置，在接收方接收并校验。双方定义一个多项式作为计算校验码的除式。

2）多项式的选项

是接受方和发送方的一个约定，也就是一个二进制数，在整个传输过程中，这个数始终保持不变.

3）模2运算

模2加法运算为：1+1=0，0+1=1，0+0=0，无进位，也无借位；

模2减法运算为：1-1=0，0-1=1，1-0=1，0-0=0，也无进位，无借位

模2除法与算术除法类似，但每一位除的结果不影响其它位，即不向上一位借位，所以实际上就是异或，中间结果的处理方式采用的是模2减法。

![](/images/book/tech-analysis/mod2division.jpg)

模2乘法类似于普通意义上的多位二进制乘法，不同之处在于后者累加中间结果（或称部分积）时采用带进位的加法，而模2乘法对中间结果的处理方式采用的是模2加法。

![](/images/book/tech-analysis/mod2multiply.jpg)

### 2. 实例

二进制序列10110011，假设选择的CRC生成多项式为G（X） = X4 + X3 + 1，求出CRC校验码。

1）首先把生成多项式转换成二进制数，由G（X） = X4 + X3 + 1可以知道（它一共是5位（总位数等于最高位的幂次加1，即4+1=5），然后根据多项式各项的含义（多项式只列出二进制值为1的位，也就是这个二进制的第4位、第3位、第0位的二进制均为1，其它位均为0）很快就可得到它的二进制比特串为11001。

即通过多项式确定出二进制除式：11001

2）因为生成多项式的位数为5，根据前面的介绍，得知CRC校验码的位数为4（校验码的位数比生成多项式的位数少1）。因为原数据帧10110011，在它后面再加4个0，得到101100110000，然后把这个数以"模2除法"方式除以生成多项式，得到的余数（即CRC码）为0100。

![](/images/book/tech-analysis/crcdivision.jpg)

注：CRC校验位的长度比二进制除式长度少1位

3）把上步计算得到的CRC校验0100替换原始帧101100110000后面的四个"0"，得到新帧101100110100。再把这个新帧发送到接收端。

4）当新帧到达接收端后，接收端会把这个新帧再用上面选定的除数11001以"模2除法"方式去除，验证余数是否为0，如果为0，则证明该帧数据在传输过程中没有出现差错，否则出现了差错。

### 3. CRC校验条件

